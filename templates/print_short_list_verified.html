{% extends "layout.html" %}

{% block content %}

{% from 'bits.html' import breadcrumb_items -%}
<ul class="breadcrumb">
  {{ breadcrumb_items([
      (url_for('webpages.meeting'), "Meeting"),
      (url_for('webpages.meeting_printouts'), "Printouts"),
      (url_for('webpages.meeting_verified_short_list'),
          "Print list of registered participants (verified)"),
      ]) }}
  </li>
</ul>

<div class="container">

  <div class="header">
      <h4>
        {{ meeting["description"] }} <br />
        {{ meeting["address"] }}
      </h4>
      <h1>List of announced participants - Total: {{ registered | length }}</h1>
  </div>

  <div class="subheader">
    <h3>
      <ul>
        <li>Credentials are required for all participants</li>
        <li>Letter of approval from Management Authority is required  for Categories 80 and 90</li>
        <li>Fees only for NGOs (Categories 80 and 90)</li>
      </ul>
    </h3>
  </div>

  <div class="content">
    <div class="actions">
      <a class="btn btn-success btn-inverse disabled" href="#">
        <i class="icon-print icon-white"></i>
        Print
      </a>
    </div>
    <table class="table table-condensed table-bordered">
      <thead>
        <tr>
          <th>Pic</th>
          <th>Representing</th>
          <th>Name</th>
          <!-- <th>Category</th> -->
          <th>Cred</th>
          <th>Appr</th>
          <th>Inv</th>
          <th>Fee</th>
          <th>Lang</th>
          <th>Alert</th>
        </tr>
      </thead>
      <tbody>
        {% for category, participants in registered.items() %}
        {% if participants %}
        <tr>
          <td class="category" colspan="9">{{ ref['category'][category]['name'] }}</th>
        </tr>
        {% for p in participants %}
        <tr>
          <td>
            {%- if p["photo_id"] -%}
            <i class="icon-camera"></i>
            {%- endif -%}
          </td>
          <td>
            {%- if p["personal_category"] == '10' -%}
              {{ ref['region'][p['representing_region']] }} - {{ ref['country'][p['representing_country']] }}
            {%- elif p["personal_category"] in ['20', '30', '40'] -%}
              {{ ref['country'][p['representing_country']] }}
            {%- elif p["personal_category"] in ['98', '99'] -%}
              CITES Secretariat and Conference Staff"
            {%- else -%}
              {{ p['representing_organization'] }}
            {%- endif -%}
          </td>
          <td>{{ p.name }}</td>
          <!-- <td>{{ ref['category'][p["personal_category"]]['name'] }}</td> -->
          <td>
            {%- if p["meeting_flags_credentials"] -%}
            <i class="icon-check"></i>
            {%- endif -%}
          </td>
          <td>
            {%- if p["meeting_flags_approval"] -%}
            <i class="icon-check"></i>
            {%- endif -%}
          </td>
          <td>
            {%- if p["meeting_flags_invitation"] -%}
            <i class="icon-check"></i>
            {%- endif -%}
          </td>
          <td>{{ ref['fee'][p["personal_fee"]] }}</td>
          <td>{{ p["personal_language"] }}</td>
          <td>
            {%- if p["meeting_flags_web_alert"] -%}
              <i class="icon-check"></i>
            {%- endif -%}
          </td>
        </tr>
        {% endfor %}
        {% endif %}
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
